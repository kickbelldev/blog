# src/domain/blog/ 블로그 도메인

@/CLAUDE.md
@../CLAUDE.md

블로그 애플리케이션의 핵심 비즈니스 로직을 담당하는 도메인입니다.

## 역할과 목적

**포스트, 카테고리, 태그의 복합 관계 관리**를 담당합니다. 단순한 CRUD를 넘어 태그 간 그래프 분석, 클러스터링, 관련 포스트 추천 등 고도화된 비즈니스 로직을 처리합니다.

## 구조

```
src/domain/blog/
├── index.ts           # 공개 API + 모듈 레벨 캐싱
├── types.ts           # 도메인 타입 (Post, Category, Tag, TagGraph)
└── logic/
    ├── posts.ts       # 포스트 파일 시스템 처리
    ├── categories.ts  # 카테고리 메타데이터 관리
    └── tags.ts        # 태그 그래프 및 클러스터 분석
```

## 핵심 특징

### 모듈 레벨 캐싱
`index.ts`에서 빌드 타임에 모든 데이터를 사전 로드하고 복잡한 관계를 계산합니다. 런타임에는 이미 처리된 데이터만 반환합니다.

### 태그 그래프 시스템  
graphology 라이브러리를 사용하여 태그 간 동시 출현 관계를 그래프로 모델링하고, degree centrality 기반 클러스터링을 수행합니다.

### 완전한 타입 안전성
모든 데이터 구조는 TypeScript로 엄격하게 타입 정의되어 있으며, UI 레이어에서 안전하게 사용할 수 있습니다.

## 데이터 흐름

1. **파싱**: `src/contents/` MDX 파일들을 gray-matter로 파싱
2. **변환**: 파싱된 데이터를 도메인 타입으로 변환
3. **관계 분석**: 태그 그래프 생성 및 클러스터 계산
4. **캐싱**: 모든 결과를 모듈 레벨에서 export

## 다른 영역과의 관계

- **src/contents/**: MDX 파일 읽기 및 파싱
- **src/app/**: 캐싱된 도메인 데이터 제공
- **외부 라이브러리**: graphology (그래프), dayjs (날짜)

## 작업 시 주의사항

- 캐싱 구조 변경 시 전체 빌드 타임 영향 고려
- 태그 그래프 알고리즘 수정 시 성능 테스트 필수
- 모든 함수는 순수 함수로 유지 (사이드 이펙트 없음)